##### --- PREFIX ---
# Use Ctrl+Space as tmux prefix instead of default Ctrl+b
set -g prefix C-Space
unbind C-b
bind C-Space send-prefix

##### --- VIM MODE ---
# Enable Vim-like keybindings in copy mode
setw -g mode-keys vi

# 'q' exits copy mode (like quitting Vim)
bind -T copy-mode-vi 'q' send-keys -X cancel

# Copy selection to Wayland clipboard using wl-copy
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "wl-copy"

##### --- RELOAD CONFIG ---
# Reload the config with prefix + r
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

##### --- PANE NAVIGATION (Vim-style) ---
bind h select-pane -L
bind l select-pane -R
bind j select-pane -D
bind k select-pane -U

##### --- PLUGINS (via TPM) ---
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'dracula/tmux'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-mem'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-resurrect'

##### --- DRACULA THEME SETTINGS ---
# Activate useful modules
set -g @dracula-plugins "cpu-usage ram-usage git time powerline"

# Labels for CPU and memory
set -g @dracula-cpu-usage-label " "
set -g @dracula-mem-usage-label " "

# Show user, host, and session on left side
set -g @dracula-show-left-icon "#{user}@#h | #S"

# Enable Dracula powerline with rounded separators
set -g @dracula-show-powerline true
set -g @dracula-show-left-sep 
set -g @dracula-show-right-sep  
set -g @dracula-inverse-divider 
set -g @dracula-transparent-powerline-bg true
set -g @dracula-show-edge-icons true

##### --- STATUS BAR SETTINGS ---
# Refresh every 5 seconds
set -g status-interval 5

# Center align window list
set -g status-justify centre

# Transparent background (inherits terminal theme)
set -g status-bg default
set -g status-fg white

# Left section: rounded edge + user@host + session
set -g status-left "#[fg=magenta]#[fg=cyan,bold,bg=magenta] #(whoami)@#H #[fg=white,bg=magenta]|#S #[bg=default,fg=magenta] "

# Right section: Git branch/status, CPU, MEM, time — with rounded edge
set -g status-right " #[fg=blue]#[fg=white,bg=blue]#(git rev-parse --abbrev-ref HEAD 2>/dev/null) #[fg=yellow,bg=blue]#(git status --porcelain 2>/dev/null | wc -l | awk '{print $1}')Δ #[fg=magenta,bg=blue]#(tmux-cpu) #[fg=green,bg=blue]#(tmux-mem) #[fg=black,bg=cyan]%H:%M:%S#[fg=cyan,bg=default]"

##### --- TPM INITIALIZATION (keep at the bottom) ---
run '~/.tmux/plugins/tpm/tpm'

